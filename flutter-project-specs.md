# تطبيق التواصل للأطفال - مواصفات المشروع

## 📱 معلومات التطبيق

### الاسم:
- **الاسم العربي**: كلامي - عالم باسل 💙
- **الاسم الإنجليزي**: Basil's Voice - Communication App
- **اسم المشروع (Flutter)**: kalamy_basil_voice
- **Package Name**: com.basilworld.kalamy
- **Bundle ID (iOS)**: com.basilworld.kalamy

### الوصف:
**بالعربي:**
تطبيق كلامي هو تطبيق تواصل مخصص للأطفال، يساعد باسل وعائلته على التواصل بسهولة باستخدام الصور والأصوات. التطبيق بسيط وسهل الاستخدام ومصمم خصيصاً للأطفال.

**بالإنجليزي:**
Kalamy (My Words) - Basil's Voice is a communication app designed for children with special needs. It helps Basil and his family communicate easily using pictures and sounds. Simple, intuitive, and child-friendly.

---

## 🎯 الهدف
تطبيق موبايل لمساعدة باسل (طفل مصاب بالتوحد) على التواصل مع عائلته باستخدام الصور والأصوات.

---

## 👥 المستخدمون
- **4-5 أجهزة**: الأب، الأم، الأخت، وأجهزة إضافية
- **جميع الأجهزة تتشارك نفس البيانات** (مزامنة تلقائية)
- **الطفل** يستخدم التطبيق للتعبير عن احتياجاته

---

## 📱 اللغة البرمجية المطلوبة
**Flutter** 

### الأسباب:
1. أداء ممتاز وسريع (مهم للأطفال)
2. يعمل على Android و iOS من نفس الكود
3. مناسب جداً للتطبيقات التعليمية
4. واجهات جميلة وسلسة
5. سهل في التطوير والصيانة

---

## 🎨 الأقسام الرئيسية (8 أقسام)

### 1. احتياجات أساسية
- عايز آكل 🍽️
- عايز أشرب 🥤
- عايز أنام 😴
- عايز حمام 🚽
- عايز أستحمى 🚿
- عايز ألبس 👕

### 2. مشاعر
- مبسوط 😊
- زعلان 😢
- تعبان 🤒
- خايف 😰
- زهقان 😑
- فرحان 🥳

### 3. أماكن
- عايز أروح الملاهي 🎡
- عايز أروح المطعم 🍕
- عايز أروح الحديقة 🌳
- عايز أروح عند جدو 👴
- عايز أروح عند تيتة 👵
- عايز أروح السينما 🎬
- عايز أروح المول 🏬
- عايز أروح البحر 🏖️

### 4. ألعاب
- عايز ألعب موبايل 📱
- عايز ألعب Xbox 🎮
- عايز ألعب PlayStation 🕹️
- عايز ألعب بالعربيات 🚗
- عايز ألعب كورة ⚽
- عايز ألعب بالمكعبات 🧩
- عايز ألعب بالدراجة 🚲

### 5. تلفزيون وكارتون
- عايز أتفرج تلفزيون 📺
- عايز أتفرج يوتيوب ▶️
- عايز أتفرج كارتون 🎬
- عايز أسمع أغاني 🎵
- عايز أتفرج فيلم 🎥

### 6. أكل وشرب
- عايز بيتزا 🍕
- عايز برجر 🍔
- عايز أيس كريم 🍦
- عايز شوكولاتة 🍫
- عايز عصير 🧃
- عايز مياه 💧
- عايز فاكهة 🍎

### 7. أشخاص
- ماما 👩
- بابا 👨
- عايز أكون لوحدي 🙋
- عايز صاحبي 👦
- عايز أخويا 👶
- عايز أختي 👧

### 8. إجابات
- أيوه ✅
- لأ ❌
- مش عارف 🤷
- ساعدني 🆘
- استنى شوية ⏰
- خلاص كفاية 🛑

---

## 🔄 سير العمل (User Flow)

### للطفل (الاستخدام العادي):
1. فتح التطبيق
2. رؤية **8 أقسام كبيرة ملونة** في الشاشة الرئيسية
3. الضغط على قسم (مثلاً: "أكل وشرب")
4. رؤية **كل العناصر** داخل هذا القسم (صور كبيرة)
5. الضغط على أي عنصر (مثلاً: "عايز بيتزا 🍕")
6. **النطق الفوري** للكلمة بصوت واضح بالعربي
7. ظهور **رسالة تشجيعية**: "أحسنت! 👏"
8. زر **رجوع** للعودة للأقسام

### للوالدين (إدارة المحتوى):
1. فتح التطبيق والدخول لأي قسم
2. الضغط على **زر الإعدادات ⚙️** (في الركن الأيسر العلوي)
3. يظهر زر **"إضافة عنصر جديد"** كبير أخضر
4. عند الضغط على أي عنصر موجود، تظهر أزرار:
   - **✏️ تعديل** (أزرق)
   - **🗑️ حذف** (أحمر)

### إضافة عنصر جديد:
1. الضغط على "إضافة عنصر جديد"
2. **كتابة النص**: مثلاً "عايز أروح حديقة الحيوان"
3. **اختيار الصورة** (3 خيارات):
   - اختيار أيقونة جاهزة (22+ أيقونة متاحة)
   - أو التقاط صورة من الكاميرا
   - أو رفع صورة من الاستوديو
4. **(اختياري)** كتابة النص الصوتي المخصص
5. الضغط على **"حفظ"**
6. العنصر يظهر **فوراً** في التطبيق
7. يتم **رفعه تلقائياً** على السحابة في الخلفية
8. **جميع الأجهزة الأخرى** تستقبل العنصر الجديد تلقائياً

---

## 💾 نظام التخزين والمزامنة

### التخزين المطلوب: Hybrid (Local + Cloud)

#### التخزين المحلي:
- **الأداة**: Hive أو SharedPreferences
- **الهدف**: حفظ كل البيانات على الجهاز
- **الفائدة**: 
  - التطبيق يعمل **بدون إنترنت**
  - **سرعة فائقة** في التحميل (فوري)
  - استمرارية العمل حتى مع انقطاع النت

#### التخزين السحابي:
- **الأداة**: Firebase (Firestore + Storage)
- **الهدف**: مزامنة البيانات بين الأجهزة
- **الفائدة**:
  - **أي تعديل** على أي جهاز يظهر على كل الأجهزة
  - **Backup آمن** للبيانات
  - **استعادة البيانات** عند تثبيت التطبيق على جهاز جديد

### آلية العمل:
1. عند إضافة/تعديل عنصر:
   - ✅ **حفظ محلي فوري** (سريع - 0 تأخير)
   - ✅ **رفع على السحابة في الخلفية** (غير محسوس)
   - ✅ **إشعار الأجهزة الأخرى** تلقائياً

2. عند فتح التطبيق:
   - ✅ **تحميل البيانات المحلية أولاً** (فوري)
   - ✅ **التحقق من Firebase للتحديثات** (في الخلفية)
   - ✅ **تنزيل أي تحديثات جديدة** تلقائياً
   - ✅ **دمج البيانات** بذكاء (آخر تعديل يفوز)

3. في حالة عدم وجود إنترنت:
   - ✅ التطبيق **يعمل عادي 100%**
   - ✅ التعديلات **تُحفظ محلياً**
   - ✅ عند عودة النت، **المزامنة تلقائياً**

---

## 🔐 نظام الحماية: Family Code

### المطلوب:
- عند **أول فتح للتطبيق**: طلب إدخال "كود العائلة"
- الكود: **4-6 أرقام** (مثلاً: 2024 أو تاريخ ميلاد الطفل)
- **كل الأجهزة** اللي تدخل نفس الكود، تشوف نفس البيانات
- **عائلات مختلفة** = بيانات منفصلة تماماً

### الهدف:
- **خصوصية كاملة**: كل عائلة ليها بياناتها
- **أمان بسيط**: بدون تعقيد (مناسب للأطفال والوالدين)
- **سهولة الاستخدام**: مرة واحدة فقط عند التثبيت

---

## 📸 معالجة الصور

### المطلوب:
1. **رفع الصور من 3 مصادر**:
   - الكاميرا (التقاط صورة جديدة)
   - الاستوديو (اختيار من الصور الموجودة)
   - أيقونات جاهزة (22+ أيقونة emoji)

2. **ضغط الصور تلقائياً**:
   - تصغير الحجم **70-80%**
   - الحد الأقصى: 800x800 pixels
   - الجودة: 85%
   - الصيغة: JPEG
   - **الهدف**: توفير المساحة والسرعة

3. **التخزين المزدوج**:
   - الصورة تُحفظ **محلياً** (للسرعة)
   - وتُرفع على **Firebase Storage** (للمزامنة)
   - الأجهزة الأخرى تُحمّل الصورة **مرة واحدة** ثم تحفظها محلياً

---

## 🔊 النطق الصوتي (Text-to-Speech)

### المطلوب:
- استخدام **Text-to-Speech** الخاص بالنظام
- اللغة: **العربية السعودية** (ar-SA)
- السرعة: **0.8x** (بطيء قليلاً - واضح للطفل)
- النبرة: **1.1** (صوت ودي)
- الحجم: **100%** (صوت كامل)

### السلوك:
- عند الضغط على أي عنصر → **نطق فوري**
- إيقاف أي نطق سابق قبل البدء بالجديد
- **لا تأخير محسوس**

---

## 🎨 التصميم والألوان

### المبادئ:
- **بساطة شديدة**: بدون تعقيدات
- **ألوان مبهجة**: مناسبة للأطفال
- **أزرار كبيرة**: سهلة الضغط
- **واضح ومباشر**: بدون غموض

### ألوان الأقسام:
- احتياجات أساسية: **أزرق** 🔵
- مشاعر: **وردي** 🩷
- أماكن: **أخضر** 🟢
- ألعاب: **بنفسجي** 🟣
- تلفزيون: **أحمر** 🔴
- أكل وشرب: **برتقالي** 🟠
- أشخاص: **أصفر** 🟡
- إجابات: **نيلي** 🔵

### الأحجام:
- **أزرار الأقسام**: كبيرة جداً (تملأ الشاشة بشكل مريح)
- **أزرار العناصر**: كبيرة (سهلة الضغط)
- **الخط**: كبير وواضح (Cairo - خط عربي جميل)
- **الأيقونات**: 64x64 pixels
- **المسافات**: واسعة ومريحة

### الزوايا:
- **كل العناصر**: زوايا دائرية 24px (مظهر ودي وآمن)

---

## ✨ المميزات المطلوبة

### 1. الشاشة الرئيسية:
- عرض **8 أقسام** في شبكة 2x4
- كل قسم: **أيقونة كبيرة + اسم + عدد العناصر**
- عند الضغط → الانتقال لشاشة القسم

### 2. شاشة القسم:
- عرض **كل العناصر** في شبكة 2 أعمدة
- **زر رجوع** في الأعلى
- **زر الإعدادات ⚙️** في الركن (لتفعيل وضع التعديل)
- عند الضغط على عنصر → **نطق + رسالة تشجيعية**

### 3. وضع التعديل:
- عند تفعيله:
  - تظهر أزرار **✏️ تعديل** و **🗑️ حذف** على كل عنصر
  - يظهر زر **"إضافة عنصر جديد"** كبير أخضر
- عند إلغائه:
  - الأزرار تختفي
  - العودة للوضع العادي

### 4. شاشة إضافة/تعديل:
- **حقل النص**: لكتابة النص
- **اختيار الصورة**: 
  - شبكة أيقونات (6x4 = 24 أيقونة)
  - أو زر "التقط صورة" 📷
  - أو زر "اختر من الاستوديو" 🖼️
- **حقل النطق** (اختياري): لتخصيص النص الصوتي
- **زر حفظ** كبير
- **زر إلغاء**

### 5. الرسوم المتحركة:
- **عند الضغط**: تكبير خفيف للعنصر
- **عند النطق**: أيقونة 🎉 + "أحسنت!" لمدة 2 ثانية
- **الانتقالات**: سلسة وسريعة

### 6. مؤشرات التقدم:
- **عند رفع صورة**: شريط تقدم صغير
- **عند المزامنة**: أيقونة صغيرة تدور في الأعلى
- **عند التحميل**: رسالة بسيطة "جاري التحميل..."

---

## 🔔 الإشعارات والرسائل

### رسائل النجاح:
- "تم الحفظ بنجاح ✅"
- "أحسنت! 👏" (عند الاستخدام)
- "تم الحذف ✅"

### رسائل الخطأ:
- "تعذر الاتصال بالإنترنت - سيتم المزامنة لاحقاً"
- "حدث خطأ - يرجى المحاولة مرة أخرى"
- "يجب كتابة النص أولاً"

### تأكيدات:
- "هل أنت متأكد من الحذف؟" (قبل حذف عنصر)

---

## 📊 البيانات الافتراضية

### عند أول تشغيل:
- تحميل **جميع الأقسام الثمانية**
- كل قسم يحتوي على **5-8 عناصر** جاهزة
- المجموع: حوالي **50 عنصراً** أولياً
- هذا يعطي **نقطة انطلاق فورية** للوالدين

---

## ⚡ متطلبات الأداء

### السرعة:
- فتح التطبيق: **أقل من 2 ثانية**
- الانتقال بين الشاشات: **فوري (< 0.3 ثانية)**
- تحميل الصور: **أقل من 1 ثانية**
- النطق الصوتي: **فوري (< 0.2 ثانية)**
- حفظ عنصر: **فوري محلياً، + رفع في الخلفية**

### الاستقرار:
- **لا انهيارات (crashes)**: التطبيق يعمل بثبات
- **استهلاك معقول للبطارية**
- **استهلاك معقول للذاكرة**

---

## 📱 التوافق

### الأنظمة:
- **Android**: 6.0+ (API 23+)
- **iOS**: 12.0+

### الأجهزة:
- **الموبايلات**: جميع الأحجام
- **التابلت**: تصميم responsive يتكيف مع الحجم

---

## 🎯 الأولويات

### الأهم:
1. **البساطة والوضوح**: واجهة بديهية
2. **السرعة**: استجابة فورية
3. **الموثوقية**: يعمل دائماً
4. **المزامنة**: تحديثات تلقائية بين الأجهزة

### متوسطة الأهمية:
5. الجماليات والألوان
6. الرسوم المتحركة
7. الرسائل التشجيعية

### أقل أهمية (للمستقبل):
8. إحصائيات الاستخدام
9. تقارير للأخصائي
10. مميزات إضافية

---

## 🚀 خطة التطوير المقترحة

### المرحلة 1 (يوم 1-2): MVP
- ✅ إعداد المشروع والبنية
- ✅ الشاشة الرئيسية + عرض الأقسام
- ✅ شاشة القسم + عرض العناصر
- ✅ النطق الصوتي
- ✅ التخزين المحلي
- **النتيجة**: تطبيق يعمل بدون إنترنت

### المرحلة 2 (يوم 2-3): إدارة المحتوى
- ✅ إضافة عناصر جديدة
- ✅ تعديل عناصر موجودة
- ✅ حذف عناصر
- ✅ رفع الصور (كاميرا + استوديو)
- ✅ ضغط الصور
- **النتيجة**: تطبيق كامل الوظائف محلياً

### المرحلة 3 (يوم 3-4): المزامنة
- ✅ إعداد Firebase
- ✅ نظام Family Code
- ✅ رفع البيانات والصور
- ✅ تنزيل التحديثات
- ✅ المزامنة التلقائية
- **النتيجة**: تطبيق متزامن بين الأجهزة

### المرحلة 4 (يوم 4-5): التحسينات
- ✅ تحسين الواجهة والألوان
- ✅ الرسوم المتحركة
- ✅ الرسائل التشجيعية
- ✅ معالجة الأخطاء
- ✅ اختبار شامل
- **النتيجة**: تطبيق جاهز للاستخدام

### المرحلة 5: النشر
- ✅ بناء APK (Android)
- ✅ بناء IPA (iOS) - اختياري
- ✅ الاختبار على أجهزة حقيقية
- ✅ التوثيق النهائي

---

## 📝 ملاحظات مهمة لـ Claude Code

### الهيكل المطلوب:
```
communication_app/
├── lib/
│   ├── main.dart
│   ├── models/          # Category, Item
│   ├── services/        # Storage, Firebase, TTS, Image
│   ├── providers/       # State management
│   ├── screens/         # Home, Category, Add/Edit
│   ├── widgets/         # Cards, Buttons
│   └── utils/           # Constants, Helpers
├── assets/
│   └── images/
└── pubspec.yaml
```

### Packages الأساسية:
- **provider**: State management
- **hive** / **hive_flutter**: Local database
- **firebase_core**: Firebase الأساسي
- **cloud_firestore**: قاعدة البيانات
- **firebase_storage**: تخزين الصور
- **flutter_tts**: النطق الصوتي
- **image_picker**: اختيار الصور
- **flutter_image_compress**: ضغط الصور
- **cached_network_image**: عرض وحفظ الصور
- **google_fonts**: خط Cairo العربي
- **uuid**: توليد IDs فريدة

### Firebase Setup:
- إنشاء مشروع Firebase جديد
- تفعيل Firestore Database
- تفعيل Storage
- تحميل ملفات التكوين:
  - `google-services.json` (Android)
  - `GoogleService-Info.plist` (iOS)

### Security Rules:
- السماح بالقراءة/الكتابة بناءً على Family Code
- حماية بسيطة بدون تعقيد

### اللغة العربية:
- الواجهة **كاملة بالعربية**
- اتجاه النصوص: RTL (من اليمين لليسار)
- خط **Cairo** من Google Fonts
- دعم TTS بالعربية السعودية

---

## ✅ Checklist النهائية

### الوظائف الأساسية:
- [ ] عرض الأقسام الثمانية
- [ ] فتح قسم ورؤية العناصر
- [ ] الضغط على عنصر والنطق الفوري
- [ ] إضافة عنصر جديد
- [ ] تعديل عنصر موجود
- [ ] حذف عنصر
- [ ] رفع صورة (كاميرا + استوديو)
- [ ] اختيار أيقونة جاهزة

### التخزين والمزامنة:
- [ ] حفظ محلي يعمل
- [ ] التطبيق يعمل offline
- [ ] رفع على Firebase يعمل
- [ ] تنزيل من Firebase يعمل
- [ ] المزامنة بين الأجهزة تعمل
- [ ] Family Code يعمل

### الأداء:
- [ ] التطبيق يفتح بسرعة
- [ ] الانتقالات سلسة
- [ ] الصور تحمّل بسرعة
- [ ] النطق فوري

### الواجهة:
- [ ] التصميم بسيط وواضح
- [ ] الألوان مبهجة
- [ ] الأزرار كبيرة
- [ ] النصوص واضحة
- [ ] اتجاه RTL صحيح

---

## 🎉 الخلاصة

**تطبيق Flutter بسيط وقوي لمساعدة الأطفال على التواصل**

### الأساسيات:
- 8 أقسام × 5-8 عناصر لكل قسم
- نطق صوتي فوري
- صور قابلة للتخصيص
- مزامنة تلقائية بين 4-5 أجهزة

### التقنيات:
- Flutter (اللغة الأساسية)
- Hive (تخزين محلي)
- Firebase (مزامنة سحابية)
- TTS (النطق)

### الهدف:
**تطبيق يعمل بشكل ممتاز، بسيط للطفل، وسهل للوالدين**

---

**بالتوفيق يا Claude Code! 🚀**